<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>POS System</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <style>

        section > section > div:nth-child(1) > form > nav {
            background-color: #25b101;
        }

        section > div > table > thead {
            background-color: #b31e74;
        }

        section > section > div:nth-child(2) > nav {
            background-color: #1a5de3;
        }

        body {
            background-color: #d2caca;
        }

        body > nav {
            border: #a38282;
        }

    </style>
</head>

<body>

<nav class="navbar navbar-expand-lg navbar-light bg-white shadow">
    <div class="container-fluid">
        <a class="navbar-brand" href="#"></a>
        <img alt="" class="d-inline-block align-text-top fw-bolder" height="45" src="assets/img/pos.png" width="45">
        <a class="navbar-brand fw-bolder text-success brandName" href="#">
            Uresha POS System</a>
        <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
                class="navbar-toggler"
                data-bs-target="#navbarSupportedContent" data-bs-toggle="collapse" type="button">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a aria-current="page" class="nav-link active" href="#" id="linkHome">Home</a>
                </li>

                <li class="nav-item">
                    <a aria-current="page" class="nav-link active" href="#">Orders</a>
                </li>
                <li class="nav-item">
                    <a aria-current="page" class="nav-link active" href="#">Items</a>
                </li>

                <li class="nav-item dropdown">
                    <a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#"
                       id="navbarDropdown" role="button">
                        Others
                    </a>
                    <ul aria-labelledby="navbarDropdown" class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" id="linkCustomer">Manage Customer</a></li>
                        <li><a class="dropdown-item" href="#" id="linkItem">Manage Items</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="#" id="linkOrder">Manage Order</a></li>
                    </ul>
                </li>
            </ul>
            <form class="d-flex">
                <img alt="" class="d-inline-block align-text-top fw-bolder" height="30" src="assets/img/log.png"
                     width="30">
                <button class="btn btn-primary" type="button">Sign In</button>
                <img alt="" class="d-inline-block align-text-top fw-bolder" height="30" src="assets/img/out.png"
                     width="30">
                <button class="btn btn-danger" type="button">Sign Out</button>
            </form>
        </div>
    </div>
</nav>

<section class="container-fluid" id="dashboardContent">
    <div class="carousel carousel-dark slide" data-bs-ride="carousel" id="carouselExampleDark">
        <div class="col-12 col-lg-13 px-xl-5 ">
            <div class="carousel-indicators">
                <button aria-current="true" aria-label="Slide 1" class="active" data-bs-slide-to="0"
                        data-bs-target="#carouselExampleDark" type="button"></button>
                <button aria-label="Slide 2" data-bs-slide-to="1" data-bs-target="#carouselExampleDark"
                        type="button"></button>
                <button aria-label="Slide 3" data-bs-slide-to="2" data-bs-target="#carouselExampleDark"
                        type="button"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img alt="..." class="d-block w-100" src="assets/img/epic-meal-prep-5.jpg">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>First slide label</h5>
                        <p>Some representative placeholder content for the first slide.</p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img alt="..." class="d-block w-100"
                         src="assets/img/204_Meal_Prep_Hero_Image_1__20210324-1067x600.jpg">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Second slide label</h5>
                        <p>Some representative placeholder content for the second slide.</p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img alt="..." class="d-block w-100" src="assets/img/Screen+Shot+2020-12-21+at+8.58.15+AM.png">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Third slide label</h5>
                        <p>Some representative placeholder content for the third slide.</p>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" data-bs-slide="prev" data-bs-target="#carouselExampleDark"
                    type="button">
                <span aria-hidden="true" class="carousel-control-prev-icon"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" data-bs-slide="next" data-bs-target="#carouselExampleDark"
                    type="button">
                <span aria-hidden="true" class="carousel-control-next-icon"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>

</section>

<section class="container-fluid" id="customerContent">
    <section class="row mt-5">
        <div class="col-md-4">
            <form class="bg-white">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <div class="container">
                        <a class="navbar-brand" href="#">Search Customer</a>
                    </div>
                </nav>
                <div class="form-group ">
                    <label for="txtSearchCusID">Customer Name :-</label>
                    <input class="form-control" id="txtSearchCusID" type="text">
                </div>

                <button class="btn btn-success m-3" id="btnSearch" type="button">Search</button>

            </form>

            <button class="btn btn-danger mt-5" type="button">Delete</button>
            <button class="btn btn-primary mt-5" type="button">Details</button>
            <button class="btn btn-success mt-5" type="button">Clear</button>
        </div>

        <div class="col-md-6">
            <nav class="navbar navbar-expand-lg navbar-light ">
                <div class="container">
                    <a class="navbar-brand" href="#">New Customer</a>
                </div>

            </nav>
            <form class="bg-white">

                <div class="form-group ">
                    <label for="txtId">Customer Id :-</label>
                    <input class="form-control" placeholder="Customer ID" id="txtId" type="text">
                    <p><small id="error" class="text-danger pl-1"></small></p>
                </div>

                <div class="form-group ">
                    <label for="txtName">Customer Name :-</label>
                    <input class="form-control"  placeholder="Customer Name" id="txtName" type="text">
                    <p><small id="error1" class="text-danger pl-1"></small></p>
                </div>

                <div class="form-group">
                    <label for="txtTp">Customer Tp :-</label>
                    <input class="form-control" placeholder="Customer Tp" id="txtTp" type="text">
                    <p><small id="error2" class="text-danger pl-1"></small></p>
                </div>
                <div class="form-group ">
                    <label for="txtSalary">Customer Salary :-</label>
                    <input class="form-control" placeholder="Customer Salary" id="txtSalary" type="text">
                    <p><small id="error3" class="text-danger pl-1"></small></p>
                </div>

                <button class="btn btn-danger mt-4" id="btnSave" type="button">Save</button>
                <button class="btn btn-warning mt-4" type="button">Renew</button>
                <button class="btn btn-primary mt-4" type="button">Close</button>
            </form>
        </div>

    </section>

    <div class="mt-5 bg-white">
        <table class="table">
            <thead class="thead-light">
            <tr>
                <th scope="col">Customer Id</th>
                <th scope="col">Customer Name</th>
                <th scope="col">TP</th>
                <th scope="col">Salary</th>
            </tr>
            </thead>
            <tbody id="customerTable"></tbody>
        </table>
    </div>

</section>

<section class="container-fluid" id="itemContent">
    <section class="row mt-5">
        <div class="col-md-4">
            <form class="bg-white">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <div class="container">
                        <a class="navbar-brand" href="#">Search Item</a>
                    </div>
                </nav>
                <div class="form-group ">
                    <label for="exampleInputName">Item Code :-</label>
                    <input class="form-control" id="exampleInputName" type="text">
                </div>

                <button class="btn btn-success m-3" type="button">Search</button>

            </form>

            <button class="btn btn-danger mt-5" type="button">Delete</button>
            <button class="btn btn-primary mt-5" type="button">Details</button>
            <button class="btn btn-success mt-5" type="button">Clear</button>
        </div>

        <div class="col-md-6">
            <nav class="navbar navbar-expand-lg navbar-light ">
                <div class="container">
                    <a class="navbar-brand" href="#">New Item</a>
                </div>

            </nav>
            <form class="bg-white">

                <div class="form-group ">
                    <label for="txtCode">Item Code :-</label>
                    <input class="form-control" placeholder="Item Code" id="txtCode" type="text">
                    <p><small id="error" class="text-danger pl-1"></small></p>
                </div>

                <div class="form-group ">
                    <label for="txtName">Item Name :-</label>
                    <input class="form-control" placeholder="Item Name" id="txtItemName" type="text">
                    <p><small id="error1" class="text-danger pl-1"></small></p>
                </div>
                <div class="form-group ">
                    <label for="txtQuantity">Item Quantity :-</label>
                    <input class="form-control" placeholder="Item Quantity" id="txtQuantity" type="text">
                    <p><small id="error2" class="text-danger pl-1"></small></p>
                </div>
                <div class="form-group">
                    <label for="txtPrice">Item Price :-</label>
                    <input class="form-control" placeholder="Item Price" id="txtPrice" type="text">
                    <p><small id="error3" class="text-danger pl-1"></small></p>
                </div>
                <button class="btn btn-danger mt-4" id="btnSaveAndUpdate" type="button">Save</button>
                <button class="btn btn-warning mt-4" type="button">Renew</button>
                <button class="btn btn-primary mt-4" type="button">Close</button>
            </form>
        </div>

    </section>

    <div class="mt-5 bg-white">
        <table class="table">
            <thead class="thead-light">
            <tr>
                <th scope="col">Item Code</th>
                <th scope="col">Item Name</th>
                <th scope="col">Quantity</th>
                <th scope="col">Price</th>
            </tr>
            </thead>
            <tbody id="itemTable"></tbody>
        </table>
    </div>

</section>

<section class="container-fluid" id="orderContent">

    <section class="row mt-5">
        <div class="col col-md-12 col-lg">
            <form class="bg-white">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <div class="container">
                        <a class="navbar-brand" href="#">Invoice Details</a>
                    </div>
                </nav>
                <div class="row">
                    <div class="form-group col">
                        <label for="exampleInputOrderId">Order Id :-</label>
                        <input class="form-control" id="exampleInputOrderId" type="text">
                    </div>
                    <div class="form-group col">
                        <label for="exampleInputDate">Date :-</label>
                        <input class="form-control" id="exampleInputDate" type="Date">
                    </div>
                </div>

                <div class="row">
                    <div class="form-group col">
                        <label for="exampleInputCustomerId">Customer Id :-</label>
                        <input class="form-control" id="exampleInputCustomerId" type="text">
                    </div>
                </div>

                <div class="row">
                    <div class="form-group col">
                        <label for="exampleInputName">Name :-</label>
                        <input class="form-control" id="exampleInputName" type="text">
                    </div>
                    <div class="form-group col">
                        <label for="exampleInputSalary">Salary :-</label>
                        <input class="form-control" id="exampleInputSalary" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exampleInputAddress">Address :-</label>
                    <input class="form-control" id="exampleInputAddress" type="text">
                </div>

            </form>
        </div>

        <div class="col col-md-12 col-lg">
            <nav class="navbar navbar-expand-lg navbar-light ">
                <div class="container">
                    <a class="navbar-brand" href="#">Item Select</a>
                </div>
            </nav>
            <form class="bg-white">
                <div class="row">
                    <div class="form-group col">
                        <label for="exampleInputName">Item :-</label>
                        <input class="form-control" id="exampleInputName" type="text">

                    </div>
                    <div class="form-group col">
                        <label for="exampleInputSalary">Item Code :-</label>
                        <input class="form-control" id="exampleInputSalary" type="text">
                    </div>
                </div>

                <div class="row">
                    <div class="form-group col">
                        <label for="exampleInputName">Item Name :-</label>
                        <input class="form-control" id="exampleInputName" type="text">
                    </div>
                    <div class="form-group col">
                        <label for="exampleInputSalary">Price :-</label>
                        <input class="form-control" id="exampleInputSalary" type="text">
                    </div>
                    <div class="form-group col">
                        <label for="exampleInputSalary">Qty On Hand :-</label>
                        <input class="form-control" id="exampleInputSalary" type="text">
                    </div>
                </div>

                <div class="form-group col">
                    <label for="exampleInputSalary">Order Quality :-</label>
                    <input class="form-control" id="exampleInputSalary" type="text">
                </div>

                <button class="btn btn-danger mt-4 " type="button">Add Item</button>
            </form>
        </div>

        <div class="col col-sm-12 col-md-12 col-lg">
            <form class="bg-white">
                <div class="row">
                    <div class="form-group col">
                        <label for="exampleInputEmail1">Cash :-</label>
                        <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail1" type="email">
                    </div>
                    <div class="form-group col">
                        <label for="exampleInputPassword1">Discount :-</label>
                        <input class="form-control" id="exampleInputPassword1" type="password">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exampleInputPassword1">Balance :-</label>
                    <input class="form-control" id="exampleInputPassword1" type="password">
                </div>

                <button class="btn btn-success m-2 align-content-center" type="submit">Purchase</button>
            </form>
        </div>


    </section>


    <div class="mt-5">
        <table class="table bg-white">
            <thead class="thead-light">
            <tr>
                <th scope="col">Item Code</th>
                <th scope="col">Item Name</th>
                <th scope="col">Price</th>
                <th scope="col">Quantity</th>
                <th scope="col">Total</th>
            </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</section>

<script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/jQuery/jquery-3.6.0.min.js"></script>
<script src="db/DB.js"></script>

<script>
    $("#dashboardContent").css("display", "block");
    $("#customerContent").css("display", "none");
    $("#itemContent").css("display", "none");
    $("#orderContent").css("display", "none");


    $("#linkCustomer").click(function () {
        $("#dashboardContent").css("display", "none");
        $("#customerContent").css("display", "block");
        $("#itemContent").css("display", "none");
        $("#orderContent").css("display", "none");

    });

    $("#linkItem").click(function () {
        $("#dashboardContent").css("display", "none");
        $("#customerContent").css("display", "none");
        $("#itemContent").css("display", "block");
        $("#orderContent").css("display", "none");

    });

    $("#linkOrder").click(function () {
        $("#dashboardContent").css("display", "none");
        $("#customerContent").css("display", "none");
        $("#itemContent").css("display", "none");
        $("#orderContent").css("display", "block");
    });

    $("#linkHome").click(function () {
        $("#dashboardContent").css("display", "block");
        $("#customerContent").css("display", "none");
        $("#itemContent").css("display", "none");
        $("#orderContent").css("display", "none");
    });

/*
    $("#btnSave").click(function () {
        saveCustomer();
        clearAll();
        loadAllCustomers();
/!*
        $("#customerTable>tr").off("click");

        let customerId = $("#txtId").val();
        let customerName = $("#txtName").val();
        let customerTp = $("#txtTp").val();
        let customerSalary = $("#txtSalary").val();

        let row = `<tr><td>${customerId}</td><td>${customerName}</td><td>${customerTp}</td><td>${customerSalary}</td></tr>`
*!/

/!*        $("#customerTable").append(row);
        $("#customerTable>tr").click(function () {
            //console.log(this);

            let custId = $(this).children(":eq(0)").text();
            let custName = $(this).children(":eq(1)").text();
            let custTp = $(this).children(":eq(2)").text();
            let custSalary = $(this).children(":eq(3)").text();

            console.log(custId, custName, custTp, custSalary);

            $("#txtId").val(custId);
            $("#txtName").val(custName);
            $("#txtTp").val(custTp);
            $("#txtSalary").val(custSalary);
        });*!/

    });

    function saveCustomer() {
        //gather customer information
        let customerID = $("#txtId").val();
        let customerName = $("#txtName").val();
        let customerTp = $("#txtTp").val();
        let customerSalary = $("#txtSalary").val();

        //create Object
        var customerObject = {
            id: customerID,
            name: customerName,
            tp: customerTp,
            salary: customerSalary
        };

        customerDB.push(customerObject);
    }
    var regExCusId = /^(C00-)[0-9]{3,4}$/;
    var regExCusName = /^[A-z]{3,}$/;
    var regExCusTp = /^(077-|071-|070-|074-|078-)[0-9]{7}$/;
    var regExCusSalary = /^[1-9]{4,}$/;

    $("#txtId").keyup(function () {
            let input = $("#txtId").val();
            if (regExCusId.test(input)){
                $("#txtId").css('border', '4px solid green');
                $("#error").text("");
                $("#txtName").focus();
            }else{
                $("#txtId").css('border', '4px solid red');
                $("#error").text("Wrong format : C00-001");
            }
        });
    $("#txtName").keyup(function () {
        let input = $("#txtName").val();
        if (regExCusName.test(input)){
            $("#txtName").css('border', '4px solid green');
            $("#error1").text("");
            $("#txtTp").focus();
        }else{
            $("#txtName").css('border', '4px solid red');
            $("#error1").text("Wrong format : only letters");
        }
    });
    $("#txtTp").keyup(function () {
        let input = $("#txtTp").val();
        if (regExCusTp.test(input)){
            $("#txtTp").css('border', '4px solid green');
            $("#error2").text("");
            $("#txtSalary").focus();
        }else{
            $("#txtTp").css('border', '4px solid red');
            $("#error2").text("Wrong format : 077-3456789");
        }
    });
    $("#txtSalary").keyup(function () {
        let input = $("#txtSalary").val();
        if (regExCusSalary.test(input)){
            $("#txtSalary").css('border', '4px solid green');
            $("#error3").text("");
            $("#btnSave").focus();
        }else{
            $("#txtSalary").css('border', '4px solid red');
            $("#error3").text("Wrong format : only numbers");
        }
    });


    $("#txtId").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }

        if (eventOb.key == "Control") {
            var typedCustomerID = $("#txtId").val();
            var srcCustomer = searchCustomerFromID(typedCustomerID);
            $("#txtId").val(srcCustomer.getCustomerID());
            $("#txtName").val(srcCustomer.getCustomerName());
            $("#txtTp").val(srcCustomer.getCustomerTp());
            $("#txtSalary").val(srcCustomer.getCustomerSalary());
        }
    });



    $("#txtName").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });

    $("#txtTp").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });

    $("#txtSalary").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });
    // focusing events end
    $("#btnSave").attr('disabled', true);

    function setButton() {
        let b = formValid();
        if (b) {
            $("#btnSave").attr('disabled', false);
        } else {
            $("#btnSave").attr('disabled', true);
        }
    }

    function loadAllCustomers() {
        $("#customerTable").empty();
        for (var i of customerDB) {
            let row = `<tr><td>${i.id}</td><td>${i.name}</td><td>${i.address}</td><td>${i.salary}</td></tr>`;
            $("#customerTable").append(row);
        }
    }

    function clearAll() {
        $('#txtId,#txtName,#txtTp,#txtSalary').val("");
        $('#txtId,#txtName,#txtTp,#txtSalary').css('border', '2px solid #ced4da');
        $('#txtId').focus();
        $("#btnSave").attr('disabled', true);
        loadAllCustomers();
     /!*   $("#lblcusid,#lblcusname,#lblcusaddress,#lblcussalary").text("");*!/
    }

    function checkIfValid() {
        var cusID = $("#txtId").val();
        if (regExCusId.test(cusID)) {
            $("#txtName").focus();
            var cusName = $("#txtName").val();
            if (regExCusName.test(cusName)) {
                $("#txtTp").focus();
                var cusTp = $("#txtTp").val();
                if (regExCusTp.test(cusTp)) {
                    $("#txtSalary").focus();
                    var cusSalary = $("#txtSalary").val();
                    var resp = regExCusSalary.test(cusSalary);
                    if (resp) {
                        let res = confirm("Do you really need to add this Customer..?");
                        if (res) {
                            saveCustomer();
                            clearAll();
                        }
                    } else {
                        $("#txtSalary").focus();
                    }
                } else {
                    $("#txtTp").focus();
                }
            } else {
                $("#txtName").focus();
            }
        } else {
            $("#txtId").focus();
        }
    }

    function setButton() {
        let b = formValid();
        if (b) {
            $("#btnSave").attr('disabled', false);
        } else {
            $("#btnSave").attr('disabled', true);
        }
    }

    $('#btnSave').click(function () {
        checkIfValid();
    });
*/

/*
    $("#txtId").keydown(function (event) {
        if (event.key == "Enter") {
            $("#txtName").focus();
        }
    });
    $("#txtName").keydown(function (event) {
        if (event.key == "Enter") {
            $("#txtTp").focus();
        }
    });
    $("#txtTp").keydown(function (event) {
        if (event.key == "Enter") {
            $("#txtSalary").focus();
        }
    });
    $("#txtSalary").keydown(function (event) {
        if (event.key == "Enter") {
            $("#btnSave").focus();
        }
    });*/


    $("#btnSave").click(function () {
        saveCustomer();
        clearAll();
        loadAllCustomers();
    });

    // search customer
    $("#btnSearch").click(function () {
        var searchID = $("#txtSearchCusID").val();

        var response = searchCustomer(searchID);
        if (response) {
            $("#txtId").val(response.id);
            $("#txtName").val(response.name);
            $("#txtTp").val(response.tp);
            $("#txtSalary").val(response.salary);
        }else{
            clearAll();
            alert("No Such a Customer");
        }
    });

    // Events end


    // CRUD OPERATIONS START
    function loadAllCustomers() {
        $("#customerTable").empty();
        for (var i of customerDB) {
            /*create a html row*/
            let row = `<tr><td>${i.id}</td><td>${i.name}</td><td>${i.tp}</td><td>${i.salary}</td></tr>`;
            /*select the table body and append the row */
            $("#customerTable").append(row);
        }
    }

    function saveCustomer() {
        //gather customer information
        let customerID = $("#txtId").val();
        let customerName = $("#txtName").val();
        let customerTp = $("#txtTp").val();
        let customerSalary = $("#txtSalary").val();

        //create Object
        var customerObject = {
            id: customerID,
            name: customerName,
            tp: customerTp,
            salary: customerSalary
        };

        customerDB.push(customerObject);
    }

    function searchCustomer(id) {
        for (let i = 0; i < customerDB.length; i++) {
            if (customerDB[i].id == id) {
                return customerDB[i];
            }
        }
    }

    function deleteCustomer(){
        //write the code
    }

    function updateCustomer(){
        //write the code
    }

    // CRUD OPERATIONS ENDED


    //validation started
    // customer regular expressions
    const cusIDRegEx = /^(C00-)[0-9]{1,3}$/;
    const cusNameRegEx = /^[A-z ]{5,20}$/;
    const cusTpRegEx = /^[0-9/A-z. ,]{7,}$/;
    const cusSalaryRegEx = /^[0-9]{1,}[.]?[0-9]{1,2}$/;


    $('#txtId,#txtName,#txtTp,#txtSalary').on('keydown', function (eventOb) {
        if (eventOb.key == "Tab") {
            eventOb.preventDefault(); // stop execution of the button
        }
    });

    $('#txtId,#txtName,#txtTp,#txtSalary').on('blur', function () {
        formValid();
    });

    //focusing events
    $("#txtId").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }

        if (eventOb.key == "Control") {
            var typedCustomerID = $("#txtId").val();
            var srcCustomer = searchCustomerFromID(typedCustomerID);
            $("#txtId").val(srcCustomer.getCustomerID());
            $("#txtName").val(srcCustomer.getCustomerName());
            $("#txtTp").val(srcCustomer.getCustomerTp());
            $("#txtSalary").val(srcCustomer.getCustomerSalary());
        }


    });

    $("#txtName").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });

    $("#txtTp").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });

    $("#txtSalary").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });
    // focusing events end
    $("#btnSave").attr('disabled', true);

    function clearAll() {
        $('#txtId,#txtName,#txtTp,#txtSalary').val("");
        $('#txtId,#txtName,#txtTp,#txtSalary').css('border', '2px solid #ced4da');
        $('#txtId').focus();
        $("#btnSave").attr('disabled', true);
        loadAllCustomers();
        $("#lblcusid,#lblcusname,#lblcusaddress,#lblcussalary").text("");
    }

    function formValid() {
        var cusID = $("#txtId").val();
        $("#txtId").css('border', '2px solid green');
        $("#lblcusid").text("");
        if (cusIDRegEx.test(cusID)) {
            var cusName = $("#txtName").val();
            if (cusNameRegEx.test(cusName)) {
                $("#txtName").css('border', '2px solid green');
                $("#lblcusname").text("");
                var cusTp = $("#txtTp").val();
                if (cusTpRegEx.test(cusTp)) {
                    var cusSalary = $("#txtSalary").val();
                    var resp = cusSalaryRegEx.test(cusSalary);
                    $("#txtTp").css('border', '2px solid green');
                    $("#lblcustp").text("");
                    if (resp) {
                        $("#txtSalary").css('border', '2px solid green');
                        $("#lblcussalary").text("");
                        return true;
                    } else {
                        $("#txtSalary").css('border', '2px solid red');
                        $("#lblcussalary").text("Cus Salary is a required field : Pattern 100.00 or 100");
                        return false;
                    }
                } else {
                    $("#txtTp").css('border', '2px solid red');
                    $("#lblcustp").text("Cus Tp is a required field : Mimum 7");
                    return false;
                }
            } else {
                $("#txtName").css('border', '2px solid red');
                $("#lblcusname").text("Cus Name is a required field : Mimimum 5, Max 20, Spaces Allowed");
                return false;
            }
        } else {
            $("#txtId").css('border', '2px solid red');
            $("#lblcusid").text("Cus ID is a required field : Pattern C00-000");
            return false;
        }
    }

    function checkIfValid() {
        var cusID = $("#txtId").val();
        if (cusIDRegEx.test(cusID)) {
            $("#txtName").focus();
            var cusName = $("#txtName").val();
            if (cusNameRegEx.test(cusName)) {
                $("#txtTp").focus();
                var cusTp = $("#txtTp").val();
                if (cusTpRegEx.test(cusTp)) {
                    $("#txtSalary").focus();
                    var cusSalary = $("#txtSalary").val();
                    var resp = cusSalaryRegEx.test(cusSalary);
                    if (resp) {
                        let res = confirm("Do you really need to add this Customer..?");
                        if (res) {
                            saveCustomer();
                            clearAll();
                        }
                    } else {
                        $("#txtSalary").focus();
                    }
                } else {
                    $("#txtTp").focus();
                }
            } else {
                $("#txtName").focus();
            }
        } else {
            $("#txtId").focus();
        }
    }

    function setButton() {
        let b = formValid();
        if (b) {
            $("#btnSave").attr('disabled', false);
        } else {
            $("#btnSave").attr('disabled', true);
        }
    }

    $('#btnSave').click(function () {
        checkIfValid();
    });
    //validation ended

















    $("#btnSaveAndUpdate").click(function () {

        $("#itemContent>tr").off("click");

        let itemCode = $("#txtCode").val();
        let itemName = $("#txtItemName").val();
        let itemQuantity = $("#txtQuantity").val();
        let itemPrice = $("#txtPrice").val();

        let row = `<tr><td>${itemCode}</td><td>${itemName}</td><td>${itemQuantity}</td><td>${itemPrice}</td></tr>`;
        $("#itemTable").append(row);


        $("#itemTable>tr").click(function () {
            // console.log(this);

            let itmCode = $(this).children(":eq(0)").text();
            let itmName = $(this).children(":eq(1)").text();
            let itmQuantity = $(this).children(":eq(2)").text();
            let itmPrice = $(this).children(":eq(3)").text();

            console.log(itmCode, itmName, itmQuantity, itmPrice);

            $("#txtCode").val(itmCode);
            $("#txtItemName").val(itemName);
            $("#txtQuantity").val(itemQuantity);
            $("#txtPrice").val(itmPrice);

        });

    });

    var regExItemCode = /^(I00-)[0-9]{3,4}$/;
    $("#txtCode").keyup(function () {
        let input = $("#txtCode").val();
        if (regExItemCode.test(input)){
            $("#txtCode").css('border', '4px solid green');
            $("#error").text("");
            $("#txtItemName").focus();
        }else{
            $("#txtCode").css('border', '4px solid red');
            $("#error").text("Wrong format : I00-001");
        }
    });

    var regExItemName = /^[A-z]{3,}$/;
    $("#txtItemName").keyup(function () {
        let input = $("#txtItemName").val();
        if (regExItemName.test(input)){
            $("#txtItemName").css('border', '4px solid green');
            $("#error1").text("");
            $("#txtQuantity").focus();
        }else{
            $("#txtItemName").css('border', '4px solid red');
            $("#error1").text("Wrong format : only letters");
        }
    });

    var regExItemQuntity = /^[1-9]{1,}$/;
    $("#txtQuantity").keyup(function () {
        let input = $("#txtQuantity").val();
        if (regExItemQuntity.test(input)){
            $("#txtQuantity").css('border', '4px solid green');
            $("#error2").text("");
            $("#txtPrice").focus();
        }else{
            $("#txtQuantity").css('border', '4px solid red');
            $("#error2").text("Wrong format : 1, 2, 10, 100");
        }
    });

    var regExItemPrice = /^[1-9]{4,}$/;
    $("#txtPrice").keyup(function () {
        let input = $("#txtPrice").val();
        if (regExItemPrice.test(input)){
            $("#txtPrice").css('border', '4px solid green');
            $("#error3").text("");
            $("#btnSaveAndUpdate").focus();
        }else{
            $("#txtPrice").css('border', '4px solid red');
            $("#error3").text("Wrong format : only letters");
        }
    });





</script>

</body>
</html>